@using System.Web
@using B2b.Web.v4.Models.Helper

<style>
    .box {
        padding: 0px !IMPORTANT;
    }
</style>

<link href="~/Content/Pages/Search/search.css" rel="stylesheet" />
<style type="text/css">
    figure.products {
        font-family: 'Raleway', Arial, sans-serif;
        position: relative;
        display: inline-block;
        margin: 10px;
        width: 100%;
        overflow: hidden;
        text-align: center;
        background: #000000;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.15);
    }

        figure.products.lg {
            min-width: 220px;
            max-width: 310px;
            max-height: 310px;
            min-height: 200px;
        }

        figure.products.md {
            min-width: 180px;
            max-width: 260px;
            max-height: 260px;
        }

        figure.products.xs {
            min-width: 120px;
            max-width: 180px;
            max-height: 180px;
        }

        figure.products * {
            -webkit-transition: all 0.35s ease-in-out;
            transition: all 0.35s ease-in-out;
        }

        figure.products img {
            opacity: 0.40;
            max-width: 100%;
            position: relative;
            top: 0;
            left: 0;
            min-height: 200px;
        }

        figure.products figcaption {
            position: absolute;
            top: 50%;
            left: 30px;
            right: 30px;
            -webkit-transform: rotate(0deg) translateY(-50%) scale(1);
            transform: rotate(0deg) translateY(-50%) scale(1);
            -webkit-transform-origin: center 0;
            transform-origin: center 0;
        }

            figure.products figcaption h2 {
                top: 50%;
                letter-spacing: -1px;
                color: #ffffff;
                text-transform: uppercase;
                padding: 10px 0;
                margin: 0;
                font-weight: 400;
            }

                figure.products figcaption h2 span {
                    font-weight: 800;
                }

            figure.products figcaption:before,
            figure.products figcaption:after {
                background-color: rgba(255, 255, 255, 0.8);
                width: 100%;
                height: 2px;
                position: absolute;
                content: "";
                display: block;
                -webkit-transition: all 0.35s ease-in-out;
                transition: all 0.35s ease-in-out;
            }

            figure.products figcaption:before {
                left: 0;
                top: 0;
            }

            figure.products figcaption:after {
                bottom: 0;
                right: 0;
            }

        figure.products.blue {
            background: #091b27;
        }

        figure.products.red {
            background: #2e0e0a;
        }

        figure.products.yellow {
            background: #4f3204;
        }

        figure.products.green {
            background: #000000;
        }

        figure.products.navy {
            background: #000000;
        }

        figure.products a {
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            position: absolute;
        }

        figure.products:hover img,
        figure.products.hover img {
            opacity: 1;
        }

        figure.products:hover figcaption,
        figure.products.hover figcaption {
            -webkit-transform: rotate(-45deg) translateY(-50%) scale(0.9);
            transform: rotate(-45deg) translateY(-50%) scale(0.9);
        }

            figure.products:hover figcaption:before,
            figure.products.hover figcaption:before,
            figure.products:hover figcaption:after,
            figure.products.hover figcaption:after {
                width: 200%;
            }

    .bgActive {
        background-color: burlywood;
    }

    .bgDisable {
        background-color: white;
    }
</style>
<section ng-controller="IndexController">
    <div class="md-margin"></div>
    <div class="container" id="divSearch">


        <div class="row">
            <div class="col-md-12 box">
                <div class="header-basket pull-left clearfix" ng-class="{bgActive: searchTab==1, bgDisable: searchTab!=1}" ng-click="getProductGroup1List()">
                    <div class="header-basket-main">
                        <div class="header-basket-row">
                            <div class="header-box-baskets">
                                <a href="javascript:;"><span>ÜRÜNLER  </span></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-basket pull-left clearfix" ng-click="selectProductGroup1(selectedProductGroup1)" ng-class="{bgActive: searchTab==2, bgDisable: searchTab!=2}">
                    <div class="header-basket-main">
                        <div class="header-basket-row">
                            <div class="header-box-baskets">
                                <a href="javascript:;"> <span>{{selectedProductGroup1.Name}}  </span></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-basket pull-left clearfix" ng-click="selectProductGroup2(selectedProductGroup2)" ng-class="{bgActive: searchTab==3, bgDisable: searchTab!=3}">
                    <div class="header-basket-main">
                        <div class="header-basket-row">
                            <div class="header-box-baskets">
                                <a href="javascript:;"> <span>{{selectedProductGroup2.Name}}  </span></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-basket pull-left clearfix" ng-click="selectProductGroup3(selectedProductGroup3)" ng-class="{bgActive: searchTab==4, bgDisable: searchTab!=4}">
                    <div class="header-basket-main">
                        <div class="header-basket-row">
                            <div class="header-box-baskets">
                                <a href="javascript:;"> <span>{{selectedProductGroup3.Name}}  </span></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-basket pull-left clearfix" ng-click="selectProductGroup4(selectedProductGroup4)" ng-class="{bgActive: searchTab==5, bgDisable: searchTab!=5}">
                    <div class="header-basket-main">
                        <div class="header-basket-row">
                            <div class="header-box-baskets">
                                <a href="javascript:;"> <span>{{selectedProductGroup4.Name}}  </span></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-basket pull-left clearfix">
                    <div class="header-basket-main">
                        <div class="header-basket-row">
                            <div class="header-box-baskets">
                                <a href="javascript:;" ng-click="search(0)"> <span>{{txtGeneralSearchText}}  </span></a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="md-margin"></div>
        <div class="row" ng-show="searchHide==1">
            <div class="col-md-12 box">
                <div class="panelLoading"></div>
                <figure class="products lg green" ng-repeat="row in productGroup1List">
                    <img src="~/Content/images/category/{{row.Name.replace(' ', '').replace(' ', '').replace('&', '').replace('', '')}}.jpg" />
                    <figcaption>
                        <h2><span>{{row.Name}}</span></h2>
                    </figcaption><a href="javascript:;" ng-click="selectProductGroup1(row)"></a>
                </figure>
            </div>
        </div>


        <div class="row" ng-show="searchHide==2">

            <div class="col-md-12 box">
                <div class="panelLoading"></div>
                <figure class="products md green" ng-repeat="row in productGroup2List">
                    <img src="~/Content/images/category/{{row.Name.replace(' ', '').replace(' ', '').replace(' ', '').replace('&', '').replace('', '').replace('.', '')}}.jpg" alt="sq-sample6" />
                    <figcaption>
                        <h2><span>{{row.Name}}</span></h2>
                    </figcaption><a href="javascript:;" ng-click="selectProductGroup2(row)"></a>
                </figure>
            </div>
        </div>
        <div class="row" ng-show="searchHide==3">
            <div class="col-md-12 box">
                <div class="panelLoading"></div>
                <figure class="products md green" ng-repeat="row in productGroup3List">
                    <img src="~/Content/images/category/{{row.Name.replace(' ', '').replace(' ', '').replace(' ', '').replace('&', '').replace('', '').replace('.', '')}}.jpg" alt="sq-sample6" />
                    <figcaption>
                        <h2><span>{{row.Name}}</span></h2>
                    </figcaption><a href="javascript:;" ng-click="selectProductGroup3(row)"></a>
                </figure>
            </div>
        </div>

        @*<div class="row" ng-show="searchHide==4">
                <div class="col-md-12 box">
                    <div class="panelLoading"></div>
                    <figure class="products md green" ng-repeat="row in productGroup4List">
                        <img src="~/Content/images/logo.png" alt="sq-sample6" />
                        <figcaption>
                            <h2><span>{{row.Name}}</span></h2>
                        </figcaption><a href="javascript:;" ng-click="selectProductGroup4(row)"></a>
                    </figure>
                </div>
            </div>*@










        <div class="row" ng-show="searchHide==5">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-6">
                        <div id="divsearchCriteria" class="row">
                            <div class="col-md-12 box">
                                <div class="col-md-12 shadowed">
                                    <div class="panelLoading"></div>
                                    <div class="row hidden">
                                        <div class="col-md-6 search-criteria-left">
                                            <div class="row">
                                                <div class="input-group input-criteria padding-2">
                                                    <span class="input-group-addon no-minwidth padding-5"><span>Üretici</span></span>
                                                    <div class="normal-selectbox clearfix">
                                                        <select id="manufacturer-select" name="manufacturer-select" multiple="multiple" ng-model="selectedManufacturer" class="customselect selectbox-manufacturer">
                                                            <option ng-repeat="manufacturer in manufacturerList" on-finish-render="ngRepeatManufacturerFinished" ng-class="{'disabled': manufacturer.Name == 'Seçiniz' }" value="{{manufacturer.Name}}">{{manufacturer.Name}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="input-group input-criteria padding-2">
                                                    <span class="input-group-addon no-minwidth padding-5"><span>Ürün Grubu 1</span></span>
                                                    <div class="normal-selectbox clearfix">
                                                        <select id="productGroup-select" name="productGroup-select" ng-change="selectProductGroupChanged()" ng-model="selectedProductGroup1" class="customselect selectbox-productgroup1 ">
                                                            <option ng-repeat="productGroup1 in productGroup1List" on-finish-render="ngRepeatGroup1Finished" value="{{productGroup1.Name}}">{{productGroup1.Name}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="row">
                                                <div class="input-group input-criteria padding-2">
                                                    <span class="input-group-addon no-minwidth padding-5"><span>Ürün Grubu 2</span></span>
                                                    <div class="normal-selectbox clearfix">
                                                        <select id="productGroup2-select" name="productGroup2-select" ng-change="selectProductGroup2Changed()" disabled="disabled" ng-model="selectedProductGroup2" style="width: 100%;" class="customselect selectbox-productgroup2 ">
                                                            <option ng-repeat="productGroup2 in productGroup2List" on-finish-render="ngRepeatGroup2Finished" value="{{productGroup2.Name}}">{{productGroup2.Name}}</option>
                                                        </select>
                                                    </div><!-- End .large-selectbox-->
                                                </div><!-- End .input-group -->
                                            </div>

                                            <div class="row">
                                                <div class="input-group input-criteria padding-2">
                                                    <span class="input-group-addon no-minwidth padding-5"><span>Ürün Grubu 3</span></span>
                                                    <div class="normal-selectbox clearfix">
                                                        <select id="productGroup3-select" name="productGroup3-select" ng-change="selectProductGroup3Changed()" disabled="disabled" ng-model="selectedProductGroup3" style="width: 100%;" class="customselect selectbox-productgroup3">
                                                            <option ng-repeat="productGroup3 in productGroup3List" on-finish-render="ngRepeatGroup3Finished" value="{{productGroup3.Name}}">{{productGroup3.Name}}</option>
                                                        </select>
                                                    </div><!-- End .large-selectbox-->
                                                </div><!-- End .input-group -->
                                            </div>

                                            <div class="row">
                                                <div class="input-group input-criteria padding-2">
                                                    <span class="input-group-addon no-minwidth padding-5"><span>Araç Marka</span></span>
                                                    <div class="normal-selectbox clearfix">
                                                        <select id="vehicleBrand-select" name="vehicleBrand-select" ng-change="selectVehicleBrandChanged()" ng-model="selectedvehicleBrand" style="width: 100%;" class="customselect selectbox-vehicleBrand">
                                                            <option ng-repeat="vehicleBrand in vehicleBrandlList" on-finish-render="ngRepeatVehicleBrandFinished" value="{{vehicleBrand.Brand}}">{{vehicleBrand.Brand}}</option>
                                                        </select>
                                                    </div><!-- End .large-selectbox-->
                                                </div><!-- End .input-group -->
                                            </div>
                                            <div class="row">
                                                <div class="input-group input-criteria padding-2">
                                                    <span class="input-group-addon no-minwidth padding-5"><span>Araç Model</span></span>
                                                    <div class="normal-selectbox clearfix">
                                                        <select id="vehicleModel-select" name="vehicleModel-select" disabled="disabled" ng-model="selectedvehicleModel" style="width: 100%;" class="customselect selectbox-vehicleModel">
                                                            <option ng-repeat="vehicleModel in vehicleModelList" on-finish-render="ngRepeatVehicleModelFinished" value="{{vehicleModel.Model}}">{{vehicleModel.Model}}</option>

                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="col-md-6 search-criteria-right">

                                            <div class="row">
                                                <div class="form-group">
                                                    <input type="checkbox" name="chkCampanign" id="chkCampanign" ng-model="chkCampanign" autocomplete="off" checked />
                                                    <div class="btn-group btn-group-full-width btn-checkbox chk-yellow padding-2">
                                                        <label for="chkCampanign" class="btn btn-block btn-default btn-custom">
                                                            <span class="fa fa-check-square-o fa-lg"></span>
                                                            <span class="fa fa-square-o fa-lg"></span>
                                                            <span class="content">Kampanya</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="form-group">
                                                    <input type="checkbox" name="chkNewProduct" id="chkNewProduct" ng-model="chkNewProduct" autocomplete="off" checked />
                                                    <div class="btn-group btn-group-full-width btn-checkbox chk-green padding-2">
                                                        <label for="chkNewProduct" class="btn btn-block btn-default btn-custom">
                                                            <span class="fa fa-check-square-o fa-lg"></span>
                                                            <span class="fa fa-square-o fa-lg"></span>
                                                            <span class="content">Yeni Ürün</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            @*<div class="row">
                                                    <div class="form-group">
                                                        <input type="checkbox" name="chkNewArrival" id="chkNewArrival" ng-model="chkNewArrival" autocomplete="off" checked />
                                                        <div class="btn-group btn-group-full-width btn-checkbox padding-2">
                                                            <label for="chkNewArrival" class="btn btn-block btn-default btn-custom">
                                                                <span class="fa fa-check-square-o fa-lg"></span>
                                                                <span class="fa fa-square-o fa-lg"></span>
                                                                <span class="content">Yeni Gelenler</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>*@
                                            <div class="row">
                                                <div class="form-group">
                                                    <input type="checkbox" name="chkComparison" id="chkComparison" ng-model="chkComparison" autocomplete="off" checked />
                                                    <div class="btn-group btn-group-full-width btn-checkbox padding-2">
                                                        <label for="chkComparison" class="btn btn-block btn-default btn-custom">
                                                            <span class="fa fa-check-square-o fa-lg"></span>
                                                            <span class="fa fa-square-o fa-lg"></span>
                                                            <span class="content">Takipteki Ürünler</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="form-group">
                                                    <input type="checkbox" name="chkOnWay" id="chkOnWay" ng-model="chkOnWay" autocomplete="off" checked />
                                                    <div class="btn-group btn-group-full-width btn-checkbox padding-2">
                                                        <label for="chkOnWay" class="btn btn-block btn-default btn-custom">
                                                            <span class="fa fa-check-square-o fa-lg"></span>
                                                            <span class="fa fa-square-o fa-lg"></span>
                                                            <span class="content">Yolda Olanlar</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="form-group">
                                                    <input type="checkbox" name="chkOnQuantity" id="chkOnQuantity" ng-model="chkOnQuantity" autocomplete="off" checked />
                                                    <div class="btn-group btn-group-full-width btn-checkbox padding-2">
                                                        <label for="chkOnQuantity" class="btn btn-block btn-default btn-custom">
                                                            <span class="fa fa-check-square-o fa-lg"></span>
                                                            <span class="fa fa-square-o fa-lg"></span>
                                                            <span class="content">Stokta Olanlar</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="form-group">
                                                    <input type="checkbox" name="chkIsPicture" id="chkIsPicture" ng-model="chkIsPicture" autocomplete="off" checked />
                                                    <div class="btn-group btn-group-full-width btn-checkbox padding-2">
                                                        <label for="chkIsPicture" class="btn btn-block btn-default btn-custom">
                                                            <span class="fa fa-check-square-o fa-lg"></span>
                                                            <span class="fa fa-square-o fa-lg"></span>
                                                            <span class="content">Resmi Olanlar</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <div class="input-group input-criteria">
                                                    <span class="input-group-addon no-minwidth"><span class="input-text">Genel Arama</span></span>
                                                    <input class="form-control" id="txtGeneralSearch" ng-model="txtGeneralSearchText" ng-keypress="keypressEvent($event)" placeholder="Ara..." type="text">
                                                    <div class="input-group-btn">
                                                        <a class="btn btn-custom" ng-click="search(1)"><i class="fa fa-search" aria-hidden="true"></i></a>
                                                        <a class="btn btn-danger" ng-click="clear()"><i class="fa fa-eraser" aria-hidden="true"></i></a>

                                                    </div>
                                                    <span class="input-group-addon switch-button">
                                                        <div class="onoffswitch3">
                                                            <input type="checkbox" name="onoffswitch3" ng-model="catalogCheckBox" ng-change="changeDisplaStyle()" class="onoffswitch3-checkbox" id="myonoffswitch3" checked>
                                                            <label class="onoffswitch3-label" for="myonoffswitch3">
                                                                <span class="onoffswitch3-inner">
                                                                    <span class="onoffswitch3-active"><span class="onoffswitch3-switch"><i class="fa fa-leanpub" aria-hidden="true"></i></span></span>
                                                                    <span class="onoffswitch3-inactive"><span class="onoffswitch3-switch"><i class="fa fa-list" aria-hidden="true"></i></span></span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                    </div>
                                    @*<div class="row">
                                            <div class="btn-group btn-group-sm btn-group-justified " role="group" aria-label="...">
                                                <a class="btn btn-custom" ng-click="Search(1)">Ara</a>
                                                <a class="btn btn-danger" ng-click="Clear()">Temizle</a>
                                                <a class="btn btn-default">Katalog</a>
                                            </div>
                                        </div>*@
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="col-md-12 search-banner box">
                            <!-- Taksit Bilgilendirmesi -->
                            @*@Html.Partial("~/Views/Partial/InstallmentInformationView.cshtml")*@
                            @{ Html.RenderPartial("~/Views/Search/AnnouncementPictureView.cshtml"); }

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="row">
                    <div class="btn-md text-center">
                        <i class="fa fa-check-circle text-success"></i> Var
                        <i class="fa fa-adjust fa-flip-horizontal text-success"></i> Az Var
                        <i class="fa fa-times-circle text-danger"></i> Yok
                        <i class="fa fa-rocket text-primary"></i> Yolda
                        @*<i class="fa fa-question-circle text-info"></i> Üreticiden Sorgula*@
                    </div>
                </div>
            </div>

            <div class="row" id="divSearchItems">
                <div id="divSearchTable" ng-if="isTableDisplay" class="col-md-12">

                    <table id="pDataTable" class="table table-striped table-bordered table-hover table-custom normal">
                        <!---table-condensed table-striped table-hover-->
                        <thead>
                            <tr>
                                @*<th></th>*@
                                <th>Kodu</th>
                                <th>Adı</th>
                                @*<th>Üretici</th>*@
                                @*<th>Üretici Kodu</th>*@
                                @*<th>Mik</th>*@
                                <th>Birim</th>
                                <th class="text-center"><i class="fa fa-picture-o fa-lg"></i></th>
                                <th class="text-center">İsk</th>
                                <th class="text-center">Liste&nbsp;Fiyatı</th>
                                <th class="text-center">Stok</th>
                                <th class="text-center">Sip.Mik</th>
                                @*<th class="text-right"></th>*@

                            </tr>
                        </thead>
                        <tbody id="tbResult" class="context shadowed">
                            <tr id="tr{{searchItem.Id}}" ng-repeat="searchItem in searchResult" on-finish-render="ngRepeatsearchResultFinished" ng-class="{'campaign': searchItem.Campaign.Type>0,'new-product': searchItem.NewProduct == true } ">
                                @*<td ng-click="detailFormatter($index,searchItem.Id,searchItem.GroupId,searchItem.Code,searchItem)"><a class="detail-icon"><i id="ic{{searchItem.Id}}" class="glyphicon glyphicon-plus icon-plus"></i></a> </td>*@
                                <td class="text-left">{{searchItem.Code}}</td>
                                <td class="col-break-all " title="{{searchItem.Name}}">{{searchItem.Name}}</td>
                                @*<td>{{searchItem.Manufacturer}}</td>*@
                                @*<td>{{searchItem.ManufacturerCode}}</td>*@
                                @*<td>{{searchItem.Quantity}}</td>*@
                                <td class="text-center">{{searchItem.Unit}}</td>
                                <td class="text-center"><i ng-if="searchItem.HavePicture==true" class="fa fa-picture-o fa-lg" ng-click="fireProductSlider(searchItem.Id,searchItem.Code)"></i></td>
                                <td class="text-center">{{searchItem.DiscountStr}}</td>
                                <td class="text-right" ng-click="titlePriceValue($event,searchItem,-1)" ng-mouseover="titlePriceValue($event,searchItem,-1)" ng-bind-html="searchItem.PriceListCustomerStr"></td>
                                <td class="text-center" ng-click="titleWarehouseValue($event,searchItem,-1)" ng-mouseover="titleWarehouseValue($event,searchItem,-1)" style="min-width:90px;">
                                    <span class="fa-stack fa-sm">
                                        <i class="fa calendar-text"></i>
                                        <i class="{{searchItem.AvailabilityCss}}"></i>
                                    </span>
                                    <span>
                                        {{searchItem.AvailabilityText}}
                                    </span>
                                </td>
                                <td class="text-center">
                                    <div class="input-group input-group-sm input-criteria">
                                        <input id="qty{{searchItem.Id}}" ng-mouseover="searchItem.Campaign.Type > 0 ? titleCampaignMinOrder($event,searchItem,-1) : null" type="text" ng-keypress="keyPressedBasket($event,searchItem.Id,0)" ng-model="v4Project" ng-click="searchItem.Campaign.Type > 0 ? titleCampaignMinOrder($event,searchItem,-1) : null" placeholder="{{searchItem.MinOrder}}" class="form-control text-center search-input">
                                        <span class="input-group-btn search-qty-btn">
                                            <a class="btn btn-custom-2" href="javascript:;" ng-click="askAvailable(searchItem.Id,0);"><i class="fa fa-shopping-cart fa-lg"></i></a>
                                        </span>
                                    </div>
                                </td>
                                @* <td class="text-right">
                                                    <div class="dropdown">
                                                        <button class="btn btn-default btn-sm btn-custom-2 dropdown-toggle transparent" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                            <i class="fa fa-cog fa-lg"></i>
                                                            <span class="caret"></span>
                                                        </button>
                                                        <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu2">
                                                            <li><a href="javascript:;" ng-click="getCustomAddBasket(searchItem)"><i class="fa fa-shopping-cart fa-fw"></i> Sepete Ekle</a></li>
                                                            <li><a href="javascript:;" ng-click="getCustomReturnProduct(searchItem)"><i class="fa fa-undo fa-fw"></i> İade Et</a></li>
                                                            <li ng-if="searchItem.FollowId==0">
                                                                <a href="javascript:;" id="follow{{searchItem.Id}}" ng-click="getCustomFollowProduct(searchItem)"><i class="fa fa-flag fa-fw"></i> Takip Et</a>
                                                            </li>
                                                            <li ng-if="searchItem.FollowId!=0">
                                                                <a href="javascript:;" id="followout{{searchItem.Id}}" ng-click="getCustomFollowProduct(searchItem)"><i class="fa fa-flag fa-fw"></i>Takipten Çıkar</a>
                                                            </li>
                                                            <li ng-if="searchItem.ComparisonId==0">
                                                                <a href="javascript:;" id="comparison{{searchItem.Id}}" ng-click="getCustomComparison(searchItem)"><i class="fa fa-compress fa-fw"></i> Karşılaştırmaya Ekle</a>
                                                            </li>
                                                            <li ng-if="searchItem.ComparisonId!=0">
                                                                <a href="javascript:;" id="comparisonout{{searchItem.Id}}" ng-click="getCustomComparison(searchItem)"><i class="fa fa-compress fa-fw"></i> Karşılaştırmadan Çıkar</a>
                                                            </li>
                                                            <li><a href="javascript:;" ng-click="getCustomDataInput(searchItem)"><i class="fa fa-pencil fa-fw"></i> Veri Girişi</a></li>
                                                                            <li><a href="javascript:;" ng-click="getCustomCalculate(searchItem)"><i class="fa fa-calculator fa-fw"></i> Hesapla</a></li>
                                                                            <li><a href="javascript:;"><i class="fa fa-trash-o fa-fw"></i> Delete</a></li>
                                                    <li role="separator" class="divider"></li>
                                                    <li><a href="javascript:;"><i class="fa fa-unlock"></i> Make admin</a></li>
                                                                            </ul>
                                            </div>
                                    </td>*@
                            </tr>
                        </tbody>
                    </table>

                </div>

                <div id="divSearchCatalog" ng-if="!isTableDisplay" class="col-md-12">

                    <div class="col-md-3 col-sm-4 col-xs-12" id="itemCatalog{{searchItem.Id}}" ng-repeat="searchItem in searchResult" on-finish-render="ngRepeatsearchResultFinished">
                        <div class="item item-hover">
                            <div class="item-image-wrapper">
                                <figure class="item-image-container">
                                    <img ng-src="{{searchItem.PicturePath}}" alt="{{searchItem.Code}}" class="item-image">
                                    <img ng-src="{{searchItem.PicturePath}}" ng-click="fireProductSlider(searchItem.Id,searchItem.Code)" alt="{{searchItem.Code}}" class="item-image-hover">
                                </figure>
                                <div class="item-price-container" ng-mouseover="titlePriceValue($event,searchItem,-1)">
                                    <span class="item-price" ng-bind-html="searchItem.PriceListStr"></span>
                                </div><!-- End .item-price-container -->
                            </div><!-- End .item-image-wrapper -->
                            <div class="item-meta-container product-catalog">
                                <div class="item-search-product">
                                    <h2 class="item-name product-catalog-name-search" style="font-weight:bold;">{{searchItem.Code}} </h2>
                                    <h3 class="item-name product-catalog-name-search">{{searchItem.Name}}  </h3>
                                    <h2 class="item-name product-catalog-name-search" style="font-weight:bold;">{{searchItem.Manufacturer}} </h2>
                                    <h3 class="item-name product-catalog-name-search" ng-mouseover="titleWarehouseValue($event,searchItem,-1)">
                                        <span class="fa-stack fa-sm">
                                            <i class="fa calendar-text"></i>
                                            <i class="{{searchItem.AvailabilityCss}}"></i>
                                        </span>
                                        <span>
                                            {{searchItem.AvailabilityText}}
                                        </span>
                                    </h3>
                                </div>
                                <div class="input-group input-group-sm input-criteria">
                                    <input id="qtyP{{searchItem.Id}}" type="text" ng-keypress="keyPressedBasket($event,searchItem.Id,1)" placeholder="{{searchItem.MinOrder}}" class="form-control text-center product-border">
                                    <span class="input-group-btn">
                                        <a class="btn btn-custom-2" href="javascript:;" ng-click="askAvailable(searchItem.Id,1);"><i class="fa fa-shopping-cart fa-lg"></i></a>
                                    </span>
                                </div>
                            </div><!-- End .item-meta-container -->
                        </div><!-- End .item -->

                    </div>


                </div>
            </div>

            <div class="row" id="SearchLoadingBar">
                <div class="col-md-12">
                    <div class="search-loading-bar">
                        <img src="~/Content/images/loading-bar.gif" />
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="btn-md text-center" style="margin-top: 10px;">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--MODALS-->
    <div class="modal fade" id="modal-text" tabindex="-1" role="dialog" aria-labelledby="myModalLabel3" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Kapat</span></button>
                    <h4 class="modal-title" id="modal-header"></h4>
                </div><!-- End .modal-header -->
                <div class="modal-body">
                    <div class="row"><div class="col-sm-12"></div></div>
                </div><!-- End .modal-body -->
                <div id="modal-footer" class="modal-footer">
                    @*<button id="buttonmodalClose" type="button" class="btn btn-custom" data-dismiss="modal">Kapat</button>*@
                </div><!-- End .modal-footer -->
            </div><!-- End .modal-content -->
        </div><!-- End .modal-dialog -->
    </div>
    <div class="modal fade" id="modal-calculate" tabindex="-1" role="dialog" aria-labelledby="myModalLabel3" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Kapat</span></button>
                    <h4 class="modal-title" id="modal-header-calculate">Hesapla</h4>
                </div><!-- End .modal-header -->
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div id="pnlResult-calculate">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="input-group input-criteria">
                                            <span class="input-group-addon no-minwidth"><span class="input-text">Liste Fiyatı</span></span>
                                            <input type="text" name="calculate-priceList" id="calculate-priceList" ng-change="calculate()" ng-model="calculatePriceListStr" class="form-control text-right eryaz-numeric-input" tabindex="3">
                                            <span class="input-group-addon no-minwidth-zero" ng-bind-html="calculateCurrency"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="xs-margin"></div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group input-criteria input-group-slider">
                                                    <span class="input-group-addon no-minwidth">İskonto 1</span>
                                                    <input id="calculate-disc1" ng-change="calculate()" ng-model="calculateDisc1" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="0.5" data-slider-value="{{calculateDisc1}}" />
                                                    <span id="calculate-disc1Val" class="input-group-addon input-group-slider-addon">{{calculateDisc1}}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group input-criteria input-group-slider">
                                                    <span class="input-group-addon no-minwidth">İskonto 2</span>
                                                    <input id="calculate-disc2" ng-change="calculate()" ng-model="calculateDisc2" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="0.5" data-slider-value="{{calculateDisc2}}" />
                                                    <span id="calculate-disc2Val" class="input-group-addon input-group-slider-addon">{{calculateDisc2}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group input-criteria input-group-slider">
                                                    <span class="input-group-addon no-minwidth">İskonto 3</span>
                                                    <input id="calculate-disc3" ng-change="calculate()" ng-model="calculateDisc3" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="0.5" data-slider-value="{{calculateDisc3}}" />
                                                    <span id="calculate-disc3Val" class="input-group-addon input-group-slider-addon">{{calculateDisc3}}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group input-criteria input-group-slider">
                                                    <span class="input-group-addon no-minwidth">İskonto 4</span>
                                                    <input id="calculate-disc4" ng-change="calculate()" ng-model="calculateDisc4" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="0.5" data-slider-value="{{calculateDisc4}}" />
                                                    <span id="calculate-disc4Val" class="input-group-addon input-group-slider-addon">{{calculateDisc4}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="input-group input-criteria">
                                                    <span class="input-group-addon no-minwidth"><span class="input-text">Net Fiyat</span></span>
                                                    <input type="text" name="calculate-priceNet" id="calculate-priceNet" ng-change="calculate()" ng-model="calculatePriceNetStr" class="form-control text-right" tabindex="3">
                                                    <span class="input-group-addon no-minwidth-zero" ng-bind-html="calculateCurrency"></span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group input-criteria">
                                                    <span class="input-group-addon no-minwidth"><span class="input-text">Miktar</span></span>
                                                    <input type="text" name="calculate-qty" id="calculate-qty" ng-change="calculate()" ng-model="calculateQty" class="form-control text-center eryaz-numeric-input-onlynumber" tabindex="3">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="xs-margin"></div>
                                        <div class="input-group input-criteria">
                                            <span class="input-group-addon no-minwidth"><span class="input-text">Toplam</span></span>
                                            <input type="text" name="calculate-total" id="calculate-total" readonly="readonly" ng-model="calculateTotal" class="form-control text-right" tabindex="3">
                                            <span class="input-group-addon no-minwidth-zero" ng-bind-html="calculateCurrency"></span>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div><!-- End .modal-body -->
                <div id="modal-footer-calculate" class="modal-footer">
                    @*<button id="buttonmodalClose" type="button" class="btn btn-custom" data-dismiss="modal">Kapat</button>*@
                </div><!-- End .modal-footer -->
            </div><!-- End .modal-content -->
        </div><!-- End .modal-dialog -->
    </div>
</section>



<script>
    var search;
    var searchCookieValue = '';

    $(document).ready(function () {


        var $t_normal = document.getElementsByClassName('normal')[0],
            tableOffset = $t_normal.offsetTop,
            $t_fixed = $t_normal.cloneNode(true);
        $t_fixed.removeChild($t_fixed.getElementsByTagName('tbody')[0]);
        $t_fixed.className = 'fixed';
        $t_normal.parentNode.insertBefore($t_fixed, $t_normal);
        function resizeFixed() {
            var i,
                $t_fixed_th = $t_fixed.getElementsByTagName('th'),
                $t_normal_th = $t_normal.getElementsByTagName('th');
            tableOffset = $t_normal.offsetTop;
            for (i = 0; i < $t_fixed_th.length; i += 1) {
                $t_fixed_th[i].style.width = ($t_normal_th[i].offsetWidth) + "px";
            }
        };
        function scroll() {
            var offset = window.pageYOffset,
                tableOffsetBottom = $t_normal.getElementsByTagName('tbody')[0].offsetHeight + tableOffset;
            if (offset < 454 || offset < tableOffset || offset > tableOffsetBottom) {
                $t_fixed.style.display = 'none';
            } else if (offset > 454 && offset >= tableOffset && offset <= tableOffsetBottom && $t_fixed.offsetWidth === 0) {
                $t_fixed.style.display = 'table';
            }
            resizeFixed();
        };
        window.onresize = resizeFixed;
        window.onscroll = scroll;
        resizeFixed();
    });


    function autocomplete(inp, arr) {
        /*the autocomplete function takes two arguments,
        the text field element and an array of possible autocompleted values:*/
        var currentFocus;
        /*execute a function when someone writes in the text field:*/
        inp.addEventListener("input", function (e) {
            var a, b, i, val = this.value;
            /*close any already open lists of autocompleted values*/
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            /*create a DIV element that will contain the items (values):*/
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            /*append the DIV element as a child of the autocomplete container:*/
            this.parentNode.appendChild(a);
            /*for each item in the array...*/
            for (i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    /*create a DIV element for each matching element:*/
                    b = document.createElement("DIV");
                    /*make the matching letters bold:*/
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    /*insert a input field that will hold the current array item's value:*/
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    /*execute a function when someone clicks on the item value (DIV element):*/
                    b.addEventListener("click", function (e) {
                        /*insert the value for the autocomplete text field:*/
                        inp.value = this.getElementsByTagName("input")[0].value;
                        /*close the list of autocompleted values,
                        (or any other open lists of autocompleted values:*/
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });
        inp.addEventListener("keydown", function (e) {
            var x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) {
                currentFocus++;
                addActive(x);
            } else if (e.keyCode == 38) {
                currentFocus--;
                addActive(x);
            }
            else if (e.keyCode == 13) {
                e.preventDefault();
                if (currentFocus > -1) {
                    if (x) x[currentFocus].click();

                    angular.element(document.getElementById('divSearch')).scope().txtGeneralSearchText = $("#txtGeneralSearch").val();
                    angular.element(document.getElementById('divSearch')).scope().search(1);
                }
                else {
                    angular.element(document.getElementById('divSearch')).scope().txtGeneralSearchText = $("#txtGeneralSearch").val();
                    angular.element(document.getElementById('divSearch')).scope().search(1);

                    closeAllLists();
                }

            }
        });
        function addActive(x) {
            if (!x) return false;
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }
        function closeAllLists(elmnt) {
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }
        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }

    var words = [];

    $.ajax({
        type: "POST",
        url: "/Search/GetCookiieValue",
        data: '{}',
        contentType: "application/json; charset=utf-8",
        success: function (response) {
            searchCookieValue = response;
            if ($.cookie(searchCookieValue) !== undefined && $.cookie(searchCookieValue).length > 0)
                words = $.cookie(searchCookieValue).split(',');

            autocomplete(document.getElementById("txtGeneralSearch"), words);
        },
        error: function () {
        }
    });






</script>

<script src="@Url.ContentVersioned("/Scripts/Pages/search.js", HttpContext.Current.Request)"></script>

@Scripts.Render("~/Scripts/jquery.mark.js")
@Scripts.Render("~/Scripts/mark.js")

<script src="@Url.Content("~/Scripts/jquery.infinite-scroll-helper.js")"></script>