@using System.Web
@using B2b.Web.v4.Models.Helper
@using B2b.Web.v4.Models.EntityLayer
@{ List<AuthorityGroup> AuthoritySalesman = (List<AuthorityGroup>)HttpContext.Current.Session["AuthoritySalesman"]; }
@{
    ViewBag.Title = "Temsilciler";
}

@section cStyleLibrary{}

@section cStyleCode{
    <style type="text/css">
        .ws-nowrap {
            max-width: 100px;
            white-space: nowrap;
        }

        .overflow-hidden {
            overflow: hidden;
        }

        .ellipsis {
            -ms-text-overflow: ellipsis;
            -o-text-overflow: ellipsis;
            text-overflow: ellipsis;
        }

        .alternativeProdcut {
            background-color: #C9302C !important;
            color: white !important;
        }

        #trigger-upload {
            color: white;
            background-color: #00ABC7;
            font-size: 14px;
            padding: 7px 20px;
            background-image: none;
        }

        #fine-uploader-manual-trigger .qq-upload-button {
            margin-right: 15px;
        }

        #fine-uploader-manual-trigger .buttons {
            width: 36%;
        }

        #fine-uploader-manual-trigger .qq-uploader .qq-total-progress-bar-container {
            width: 60%;
        }

        #mainTable tr td {
            text-align: center;
            vertical-align: middle;
        }
    </style>
}

<div ng-controller="IndexController">
    <div class="page page-salesman">
        <div class="pageheader">
            <div class="page-bar">
                <ul class="page-breadcrumb">
                    <li>
                        <a href="/Admin"><i class="fa fa-home"></i> Eryaz</a>
                    </li>
                    <li>
                        <a href="/Admin/Salesman">Temsilciler</a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- page content -->
        <div class="pagecontent">
            <div class="row">
                <!-- col -->
                <div class="col-sm-12">
                    <!-- tile -->
                    <section class="tile">
                        <!-- tile header -->
                        <div class="tile-header bg-blue dvd dvd-btm">
                            <h1 class="custom-font"><strong>Temsilci </strong>Ara</h1>
                        </div>
                        <!-- /tile header -->
                        <!-- tile widget -->
                        <div class="tile-widget">
                            <div class="form-horizontal">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="iProductCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Kod</label>
                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                <div class="input-group">
                                                    <input id="iProductCode" type="text" ng-keypress="keypressEventSearchSalesman($event,searchCriteriaSalesman,'selectedSalesman')" ng-model="searchCriteriaSalesman.Code" placeholder="Lütfen, Temsilci Kodu Giriniz..." class="form-control" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="20" />
                                                    <span class="input-group-btn">
                                                        <button ng-click="salesmanSelectOpen(searchCriteriaSalesman,'selectedSalesman');" class="btn btn-block btn-primary btn-rounded">
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="iProductName" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Temsilci Adı</label>
                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                <div class="input-group">
                                                    <input id="iProductName" type="text" ng-model="searchCriteriaSalesman.Name" ng-keypress="keypressEventSearchSalesman($event,searchCriteriaSalesman,'selectedSalesman')" placeholder="Lütfen, Temsilci Adı Giriniz..." class="form-control" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="50" />
                                                    <span class="input-group-btn">
                                                        <button ng-click="salesmanSelectOpen(searchCriteriaSalesman,'selectedSalesman');" class="btn btn-block btn-primary btn-rounded">
                                                            <i class="fa fa-search"></i>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-2">
                                        <div class="form-group">
                                            <div class="col-xs-12">
                                                <button ng-click="clearSalesman();" class="btn btn-block btn-danger btn-rounded">
                                                    <span class="hidden-sm">Temizle</span> <i class="fa fa-trash-o visible-sm"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-xs-12">
                                                <button ng-click="salesmanSelectOpen(searchCriteriaSalesman,'selectedSalesman');" class="btn btn-block btn-primary btn-rounded">
                                                    <span class="hidden-sm">Gelişmiş Arama</span> <i class="fa fa-search visible-sm"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-4">
                                        <dl class="dl-horizontal">
                                            <dt class="text-orange">Temsilci No:</dt>
                                            <dd> {{selectedSalesman.Id}}</dd>
                                        </dl>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /tile widget -->

                        <hr class="m-0" />

                        <!-- tile body -->
                        <div class="tile-body p-10">
                            <div class="row">
                                <div class="col-sm-12">
                                    <!-- #region Nav Tabs -->
                                    <ul role="tablist" class="nav nav-tabs tabs-dark">
                                        @if (AuthoritySalesman.Where(x => x.Id == 66).Count() == 0)
                                        {
                                            <li role="presentation" class="active"><a href="#tSalesmanGeneralInformation" id="aSalesmanGeneralInformation" aria-controls="tSalesmanGeneralInformation" role="tab" data-toggle="tab"><span class="hidden-sm">Genel</span> <i class="fa fa-book visible-sm"></i></a></li>
                                        }
                                        @if (AuthoritySalesman.Where(x => x.Id == 67).Count() == 0)
                                        {
                                            <li role="presentation"><a href="#tSalesmanAuthorization" aria-controls="tSalesmanAuthorization" role="tab" data-toggle="tab" ng-click="getAuthoritySalesman()"><span class="hidden-sm">Yetkilendirme</span> <i class="fa fa-cubes visible-sm"></i></a></li>
                                        }
                                        @if (AuthoritySalesman.Where(x => x.Id == 68).Count() == 0)
                                        {
                                            <li  role="presentation"><a href="#tSalesmanConnectedCustomers" aria-controls="tSalesmanConnectedCustomers" role="tab" data-toggle="tab" ng-click="getCustomerList()"><span class="hidden-sm">Bağlı Müşteriler</span> <i class="fa fa-users visible-sm"></i></a></li>
                                        }
                                        @if (AuthoritySalesman.Where(x => x.Id == 84).Count() == 0)
                                        {
                                            <li role="presentation"><a href="#tSalesmanTwoFactorAuthenticator" ng-click="getAuthenticatorImage()" aria-controls="tSalesmanTwoFactorAuthenticator" role="tab" data-toggle="tab"><span class="hidden-sm">Two Factor Authenticator</span> <i class="fa fa-user-secret visible-sm"></i></a></li>
                                        }
                                    </ul>
                                    <!-- #endregion -->
                                    <!-- #region Tab Panes -->
                                    <div class="tab-content">
                                        <div id="tSalesmanGeneralInformation" role="tabpanel" class="tab-pane active">
                                            <div class="row form-horizontal form-group-sm">
                                                <div class="col-sm-6">
                                                    <div class="panel panel-default panel-filled">
                                                        <div class="panel-heading">
                                                            <h3 class="panel-title">Adres Bilgileri</h3>
                                                        </div>

                                                        <div class="panel-body p-10">
                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanSerial" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Seri</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <input id="iSalesmanSerial" type="text" ng-disabled="lockUpdate" ng-model="selectedSalesman.Prefix" placeholder="Lütfen, Seri Giriniz..." class="form-control" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="5" />
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanUserCount" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Kullanıcı Sayısı</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <select id="bankName-select{{selectedSalesman.NumberOfUser}}" ng-disabled="lockUpdate" ng-model="selectedSalesman.NumberOfUser" style="width: 100%;" class="form-control" ng-options="item.Count as item.Count for item in userCountList"></select>
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanAdminUserCount" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Yönetici Kul. Say.</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <select id="bankName-select{{selectedSalesman.NumberOfUserModerator}}" ng-disabled="lockUpdate" ng-model="selectedSalesman.NumberOfUserModerator" style="width: 100%;" class="form-control" ng-options="item.Count as item.Count for item in userCountList"></select>
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanAndroidUserCount" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Android Kul. Say.</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <select id="bankName-select{{selectedSalesman.NumberOfUserAndroid}}" ng-disabled="lockUpdate" ng-model="selectedSalesman.NumberOfUserAndroid" style="width: 100%;" class="form-control" ng-options="item.Count as item.Count for item in userCountList"></select>
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanIosUserCount" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Ios Kul. Say.</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <select id="bankName-select{{selectedSalesman.NumberOfUserIos}}" ng-disabled="lockUpdate" ng-model="selectedSalesman.NumberOfUserIos" style="width: 100%;" class="form-control" ng-options="item.Count as item.Count for item in userCountList"></select>
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanPassword" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Şifre</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-3">
                                                                    <input id="iSalesmanPassword" type="text" ng-disabled="lockUpdate" ng-model="selectedSalesman.Password" placeholder="Lütfen, Şifre Giriniz..." class="form-control" />
                                                                </div>
                                                                <div class="col-xs-12 col-sm-12 col-md-5">
                                                                    <input type="button" ng-disabled="lockUpdate" ng-click="showEmailSendScreen()" class="btn btn-warning btn-rounded btn-ef btn-ef-5 btn-ef-5a" value="Sıfırlama Gönder" />
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5 hidden">
                                                                <label for="iSalesmanOrderControlTimeSeconds" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Sip. Knt. Süresi. (San)</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <input id="iSalesmanOrderControlTimeSeconds" type="text" ng-disabled="lockUpdate" ng-model="selectedSalesman.IntervalTime" placeholder="Lütfen, Sipariş Kontrol Süresi (Saniye) Giriniz..." class="form-control" />
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanPhone1" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Tel 1</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <input id="iSalesmanPhone1" type="text" ng-disabled="lockUpdate" ng-model="selectedSalesman.Tel1" placeholder="Lütfen, 1.Telefon No Giriniz..." class="form-control" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="20" />
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanPhone2" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Tel 2</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <input id="iSalesmanPhone2" type="text" ng-disabled="lockUpdate" ng-model="selectedSalesman.Tel3" placeholder="Lütfen, 2.Telefon No Giriniz..." class="form-control" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="20" />
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-0">
                                                                <label for="iSalesmanEmail" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">E-Posta</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <input id="iSalesmanEmail" type="text" ng-disabled="lockUpdate" ng-model="selectedSalesman.Email" placeholder="Lütfen, E-Posta Giriniz..." class="form-control" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="50" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="panel panel-default panel-filled">
                                                        <div class="panel-heading">
                                                            <h3 class="panel-title">Temsici Resmi</h3>
                                                        </div>

                                                        <div class="panel-body p-10">
                                                            <div class="form-group">
                                                                <label for="input01" class="col-sm-2 control-label">Temsilci Resmi:</label>
                                                                <div class="col-sm-10">
                                                                    <img ng-src="{{selectedSalesman.PicturePath}}" />
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label for="iFileImage" class="col-sm-2 control-label">Temsilci Resmi</label>
                                                                <div class="col-sm-10">
                                                                    <input type="file" id="iFileImage" ng-model="fileImage" base-sixty-four-input onchange="angular.element(this).scope().setFileImage(this)" accept="image/*" data-buttonText="Görsel Yükle" data-iconName="fa fa-image" class="filestyle" />
                                                                </div>
                                                            </div>

                                                            <div class="form-group text-right">
                                                                <div class="col-sm-12">
                                                                    <button type="button" ng-click="fileImageSave()" class="btn btn-primary">Yükle</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="panel panel-default panel-filled">
                                                        <div class="panel-heading">
                                                            <h3 class="panel-title">Mesaj</h3>
                                                        </div>

                                                        <div class="panel-body p-10">
                                                            <div class="form-group mb-0">
                                                                <label for="iSalesmanMessage" class="col-xs-12 col-sm-3 col-md-2 control-label text-left hidden-xs hidden-sm">Mesaj</label>
                                                                <div class="col-xs-12 col-sm-9 col-md-10">
                                                                    <textarea id="iSalesmanMessage" rows="5" ng-disabled="lockUpdate" ng-model="selectedSalesman.Message" placeholder="Lütfen, Temsilci Mesajı Giriniz..." class="form-control" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="5"></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-6">
                                                    <div class="panel panel-default panel-filled">
                                                        <div class="panel-heading">
                                                            <h3 class="panel-title">Lisans</h3>
                                                        </div>

                                                        <div class="panel-body p-10">
                                                            <div class="row form-horizontal form-group-sm">
                                                                <div class="col-sm-12">
                                                                    <div loading-container="tableLicenceB2BParams.settings().$loading">
                                                                        <table ng-table="tableLicenceB2BParams" class="table table-condensed table-bordered table-striped" ng-form="tableForm" disable-filter="isAdding" demo-tracked-table="tableTracker">
                                                                            <tr ng-repeat="row in $data" ng-form="rowForm" demo-tracked-table-row="row">
                                                                                <td title="'Ter. No'" filter="{TerminalNo: 'number'}" sortable="'TerminalNo'" ng-switch="row.isEditing" ng-class="TerminalNo.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="TerminalNo" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.TerminalNo}}</span>
                                                                                </td>
                                                                                <td title="'Kayıt Tarihi'" filter="{Date: 'text'}" sortable="'Date'" ng-switch="row.isEditing" ng-class="Date.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Date" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.Date   | date:'dd.MM.yyyy  hh:mm'}}</span>
                                                                                </td>
                                                                                <td title="'Ip'" filter="{Ip: 'text'}" sortable="'Ip'" ng-switch="row.isEditing" ng-class="IpAddress.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="IpAddress" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.IpAddress}}</span>
                                                                                </td>
                                                                                <td class="text-center">
                                                                                    <button class="btn btn-danger btn-xs" ng-click="tableLicenceForDelete(row)" ng-if="!row.isEditing"><span class="glyphicon glyphicon-trash"></span></button>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="panel panel-default panel-filled">
                                                        <div class="panel-heading">
                                                            <h3 class="panel-title">Yönetici Lisans</h3>
                                                        </div>

                                                        <div class="panel-body p-10">
                                                            <div class="row form-horizontal form-group-sm">
                                                                <div class="col-sm-12">
                                                                    <div loading-container="tableLicenceAdminParams.settings().$loading">
                                                                        <table ng-table="tableLicenceAdminParams" class="table table-condensed table-bordered table-striped" ng-form="tableForm" disable-filter="isAdding" demo-tracked-table="tableTracker">
                                                                            <tr ng-repeat="row in $data" ng-form="rowForm" demo-tracked-table-row="row">
                                                                                <td title="'Ter. No'" filter="{TerminalNo: 'number'}" sortable="'TerminalNo'" ng-switch="row.isEditing" ng-class="TerminalNo.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="TerminalNo" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.TerminalNo}}</span>
                                                                                </td>
                                                                                <td title="'Kayıt Tarihi'" filter="{Date: 'text'}" sortable="'Date'" ng-switch="row.isEditing" ng-class="Date.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Date" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.Date   | date:'dd.MM.yyyy  hh:mm'}}</span>
                                                                                </td>
                                                                                <td title="'Ip'" filter="{Ip: 'text'}" sortable="'Ip'" ng-switch="row.isEditing" ng-class="IpAddress.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="IpAddress" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.IpAddress}}</span>
                                                                                </td>
                                                                                <td class="text-center">
                                                                                    <button class="btn btn-danger btn-xs" ng-click="tableLicenceForDelete(row)" ng-if="!row.isEditing"><span class="glyphicon glyphicon-trash"></span></button>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="panel panel-default panel-filled">
                                                        <div class="panel-heading">
                                                            <h3 class="panel-title">Mobil Lisans</h3>
                                                        </div>

                                                        <div class="panel-body p-10">
                                                            <div class="row form-horizontal form-group-sm">
                                                                <div class="col-sm-12">
                                                                    <div loading-container="tableLicenceMobileParams.settings().$loading">
                                                                        <table ng-table="tableLicenceMobileParams" class="table table-condensed table-bordered table-striped" ng-form="tableForm" disable-filter="isAdding" demo-tracked-table="tableTracker">
                                                                            <tr ng-repeat="row in $data" ng-form="rowForm" demo-tracked-table-row="row">
                                                                                <td title="'Ter. No'" filter="{TerminalNo: 'number'}" sortable="'TerminalNo'" ng-switch="row.isEditing" ng-class="TerminalNo.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="TerminalNo" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.TerminalNo}}</span>
                                                                                </td>
                                                                                <td title="'Kayıt Tarihi'" filter="{Date: 'text'}" sortable="'Date'" ng-switch="row.isEditing" ng-class="Date.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Date" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.Date   | date:'dd.MM.yyyy  hh:mm'}}</span>
                                                                                </td>
                                                                                <td title="'IMEI'" filter="{IMEI: 'text'}" sortable="'IMEI'" ng-switch="row.isEditing" ng-class="IMEI.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="IMEI" demo-tracked-table-cell>
                                                                                    <span ng-switch-default class="editable-text">{{row.IMEI}}</span>
                                                                                </td>
                                                                                <td class="text-center">
                                                                                    <button class="btn btn-danger btn-xs" ng-click="tableLicenceMobileForDelete(row)" ng-if="!row.isEditing"><span class="glyphicon glyphicon-trash"></span></button>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="panel panel-default panel-filled">
                                                        <div class="panel-heading">
                                                            <h3 class="panel-title">Ayarlar </h3>
                                                        </div>



                                                        <div class="panel-body p-10">
                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanSerial" class="col-xs-12 col-sm-5 col-md-3 control-label text-left hidden-xs hidden-sm">Otomatik Kilitle</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-9">
                                                                    <div class="col-md-12">

                                                                        <label class="checkbox checkbox-custom-alt">
                                                                            <input type="checkbox" ng-model="selectedSalesman.IsAutoLock" ng-click="setSessionAutoLock()" ng-disabled="lockUpdate" ng-checked="selectedSalesman.IsAutoLock" class="ng-pristine ng-untouched ng-valid ng-empty"><i></i> Evet
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="form-group mb-5">
                                                                <label for="iSalesmanUserCount" class="col-xs-12 col-sm-5 col-md-3 control-label text-left hidden-xs hidden-sm">Süre</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-9">
                                                                    <div class="col-md-4">
                                                                        <input class="form-control" type="number" min="0" ng-model="selectedSalesman.IntervalTime" ng-disabled="lockUpdate == true || (selectedSalesman.IsAutoLock == false && selectedSalesman.IntervalTime  == 0)" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="3">

                                                                    </div>
                                                                    <div class="col-md-8">
                                                                        <label> saniye sonra oturumu kilitle</label>

                                                                    </div>

                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="tSalesmanAuthorization" role="tabpanel" class="tab-pane">
                                            <div class="row form-horizontal form-group-sm">
                                                <div class="col-sm-12">
                                                    <div class="panel panel-default panel-filled">
                                                        <div class="panel-heading">
                                                            <h3 class="panel-title">Yetki Başlıkları</h3>
                                                        </div>

                                                        <div class="panel-body p-10" ng-repeat="fieldItem in fieldList">
                                                            <div class="form-group mb-0">
                                                                <label for="chckAuthurityCustomer{{fieldItem.Field}}" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">{{fieldItem.Comment}}</label>
                                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                                    <label class="checkbox checkbox-custom-alt">
                                                                        <input type="checkbox" id="chckAuthurityCustomer{{fieldItem.Field}}" ng-change="checkAuthoritySalesman(fieldItem.Field)" ng-model="authorityItem[0][fieldItem.Field]" /><i></i>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="tSalesmanConnectedCustomers" class="tab-pane " role="tabpanel">

                                            <div class="col-sm-12" @*ng-if="selectedSalesman.Id != undefined && selectedSalesman.Id > 0;"*@>

                                                <button class="btn btn-red pull-left" ng-click="DeleteCustomerOfSalesman();">
                                                    <i class="fa fa-caret-right"></i>
                                                    Seçilenleri Çıkart
                                                </button>

                                                <button class="btn btn-success pull-right" ng-click="CustomerSelectOpenSalesman(searchCriteria,'CustomerSelectOpenSalesman');">
                                                    <i class="fa fa-caret-right"></i>
                                                    Yeni Müşteri Bağla
                                                </button>


                                                <button class="btn btn-primary  pull-right mr-10" ng-click="exportToExcel()">
                                                    <i class="fa fa-file-excel-o"></i>
                                                    Excel'e Kaydet
                                                </button>

                                            </div>

                                            <div class="col-sm-12">

                                                <div loading-container="tableCustomerListParams.settings().$loading">
                                                    <table ng-table="tableCustomerListParams" class="table table-condensed table-bordered table-striped" ng-form="tableForm" disable-filter="isAdding" demo-tracked-table="tableTracker">
                                                        <tr ng-repeat="row in $data" ng-form="rowForm" demo-tracked-table-row="row">
                                                            <td title="'Seç'" filter="{Code: 'number'}" sortable="'Code'" ng-switch="row.isEditing" ng-class="Code.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Code" demo-tracked-table-cell>


                                                                <label class="checkbox checkbox-custom-alt">
                                                                    <input type="checkbox" ng-change="addOrDeleteCustomerId(row,this)" ng-model="checkIds" value="{{row.Id}}" /><i></i>
                                                                </label>
                                                            </td>
                                                            <td title="'Cari Kodu'" filter="{Code: 'number'}" sortable="'Code'" ng-switch="row.isEditing" ng-class="Code.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Code" demo-tracked-table-cell>
                                                                <span ng-switch-default class="editable-text">{{row.Code}}</span>
                                                            </td>
                                                            <td title="'Cari Ünvanı'" filter="{Name: 'text'}" sortable="'Name'" ng-switch="row.isEditing" ng-class="Name.$dirty ? 'bg-warning text-left' : 'text-left'" ng-form="Name" demo-tracked-table-cell>
                                                                <span ng-switch-default class="editable-text">{{row.Name}}</span>
                                                            </td>
                                                            <td title="'Adres'" filter="{Address: 'text'}" sortable="'Address'" ng-switch="row.isEditing" ng-class="Address.$dirty ? 'bg-warning text-left' : 'text-left'" ng-form="Address" demo-tracked-table-cell>
                                                                <span ng-switch-default class="editable-text">{{row.Address}}</span>
                                                            </td>
                                                            <td title="'İl'" filter="{City: 'text'}" sortable="'City'" ng-switch="row.isEditing" ng-class="City.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="City" demo-tracked-table-cell>
                                                                <span ng-switch-default class="editable-text">{{row.City}}</span>
                                                            </td>
                                                            <td title="'Tel'" filter="{Tel1: 'text'}" sortable="'Tel1'" ng-switch="row.isEditing" ng-class="Tel1.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Tel1" demo-tracked-table-cell>
                                                                <span ng-switch-default class="editable-text">{{row.Tel1}}</span>
                                                            </td>
                                                            <td title="'Mail'" filter="{Mail: 'text'}" sortable="'Mail'" ng-switch="row.isEditing" ng-class="Mail.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Mail" demo-tracked-table-cell>
                                                                <span ng-switch-default class="editable-text">{{row.Mail}}</span>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>

                                        </div>

                                        <div id="tSalesmanTwoFactorAuthenticator" class="tab-pane">
                                            <div class="row">
                                                <div class="col-sm-12" @*ng-if="selectedSalesman.Id != undefined && selectedSalesman.Id > 0;"*@>


                                                    <label class="checkbox checkbox-custom-alt">
                                                        <input id="chkCustomerSpecialInstallment" type="checkbox" ng-click="setAuthenticatorValue();" ng-model="selectedSalesman.IsAuthenticator" /><i></i> {{selectedSalesman.Name}} kullanıcısı için Two Factor Authenticator Aktifleştir.
                                                    </label>
                                                    <label class="checkbox checkbox-custom-alt">
                                                        <input id="chkCustomerSpecialInstallment" type="checkbox" ng-click="setAuthenticatorValue();" ng-model="selectedSalesman.IsB2bAuthenticator" /><i></i> {{selectedSalesman.Name}} kullanıcısı için B2B Girişi Two Factor Authenticator Aktifleştir.
                                                    </label>

                                                    <button class="btn btn-success pull-right" ng-disabled="!selectedSalesman.IsAuthenticator" ng-if="selectedSalesman.AuthenticatorGuid == null" ng-click="createAuthenticator(selectedSalesman,0)">
                                                        <i class="fa fa-caret-right"></i>
                                                        Oluştur
                                                    </button>
                                                    <button class="btn btn-success pull-right" ng-disabled="!selectedSalesman.IsAuthenticator" ng-if="selectedSalesman.AuthenticatorGuid.length > 0" ng-click="createAuthenticator(selectedSalesman,1)">
                                                        <i class="fa fa-refresh"></i>
                                                        Yenile
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <img src="{{authenticatorQrCode}}" />
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="alert alert-info mb-10">
                                                        <strong>Bilgi!</strong> Kullanıcının mobil uygulama olarak <strong>Google Authenticator</strong> uygulamasını yüklemesi gerekmektedir.
                                                    </div>
                                                    <div class="alert alert-info mb-10">
                                                        <strong>Bilgi!</strong> Kullanıcının oluşan Qr Code görselini Google Authenticator uygulamasına taratması gerekmektedir
                                                    </div>
                                                    <div class="alert alert-info mb-10">
                                                        <strong>Bilgi!</strong> Qr Code görselini yenilemeniz durumunda kullanıcının oluşan Qr Code görselini tekrar taratması gerekmektedir
                                                    </div>
                                                    <div class="alert alert-info mb-10">
                                                        <strong>Bilgi!</strong> Kullanıcı <strong>Google Authenticator</strong> uygulamasından üretilen şifreyi mevcut şifresinin sonuna ek olarak girmesi gerekmektedir.
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <!-- #endregion -->
                                </div>
                            </div>
                        </div>
                        <!-- /tile body -->
                        <!-- tile footer -->
                        <div class="tile-footer dvd dvd-top">
                            <div class="row">
                                <div class="col-sm-8 col-sm-offset-2 text-center">
                                    <div class="btn-group btn-group-rounded btn-group-lg">
                                        <button class="btn btn-warning btn-rounded btn-ef btn-ef-5 btn-ef-5a" ng-click="changeLockUpdate()"><i class="fa fa-edit"></i> <span>Düzenle</span></button>
                                        <button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5a" ng-click="cancelLockUpdate();" ng-if="!lockUpdate"><i class="fa fa-close"></i> <span>İptal</span></button>
                                        <button class="btn btn-primary btn-rounded btn-ef btn-ef-5 btn-ef-5a" ng-click="saveSalesman()"><i class="fa fa-floppy-o"></i> <span>Kaydet</span></button>
                                        <button class="btn btn-success btn-rounded btn-ef btn-ef-5 btn-ef-5a" ng-click="changeNewLockUpdate()"><i class="fa fa-plus-square"></i> <span>Yeni</span></button>
                                        <button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5a" ng-click="deleteSalesman(false)"><i class="fa fa-close"></i> <span>Sil</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /tile footer -->
                    </section>
                    <!-- /tile -->
                    <!-- /col -->
                </div>
                <!-- /row -->
            </div>
        </div>
        <!-- /page content -->
    </div>

    <!-- #region Custom Html Dircetive Modals -->
    <custom-salesman-select></custom-salesman-select>
    <custom-customer-select></custom-customer-select>
    <div id="mCustomerSearchSalesmanOfCustomer" tabindex="-1" role="dialog" aria-labelledby="mCustomerSearchSalesmanOfCustomerLabel" aria-hidden="true" class="modal fade">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Müşteri Ara</h3>
                </div>
                <div class="modal-body">
                    <form id="mCustomerSearchSalesmanOfCustomerForm" role="form" method="post" class="form-horizontal form-modal">
                        <div class="row row-fixed">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="iCustomerCode" class="col-xs-4 col-sm-3 control-label">Kod</label>
                                    <div class="col-xs-8 col-sm-9">
                                        <input id="iCustomerCode" type="text" ng-model="searchCriteria.Code" ng-keypress="keypressEventSearch($event,searchCriteria,'selectedCustomer')" placeholder="Lütfen, Müşteri Kodu Giriniz..." class="form-control" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="iCustomerName" class="col-xs-4 col-sm-3 control-label">Ünvan</label>
                                    <div class="col-xs-8 col-sm-9">
                                        <input id="iCustomerName" type="text" ng-model="searchCriteria.Name" ng-keypress="keypressEventSearch($event,searchCriteria,'selectedCustomer')" placeholder="Lütfen, Ünvan Giriniz..." class="form-control" onkeypress="return fireMaxLenghtControl(this)" data-max-lenght="50" />
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="iCustomerRuleCode" class="col-xs-4 col-sm-3 control-label">Koşul Kodu</label>
                                    <div class="col-xs-8 col-sm-9">
                                        <div class="input-group">
                                            <input id="iCustomerRuleCode" type="text" ng-model="searchCriteria.RuleCode" ng-keypress="keypressEventSearch($event,searchCriteria,'selectedCustomer')" placeholder="Lütfen, Koşul Kodu Giriniz..." class="form-control" />
                                            <span class="input-group-btn">
                                                <button ng-click="customerRuleOpen(1);" class="btn btn-block btn-primary btn-rounded">
                                                    <i class="fa fa-search"></i>
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-xs-6 col-sm-6">
                                        <button type="button" ng-click="clear()" class="btn btn-danger btn-block">Temizle</button>
                                    </div>

                                    <div class="col-xs-6 col-sm-6">
                                        <button type="button" ng-click="generalSearchSalesmanOfCustomer(searchCriteria)" class="btn btn-success btn-block">Ara</button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-xs-6 col-sm-6">
                                        <button type="button" ng-click="addCustomerOfSalesman();" class="btn btn-success btn-block">Seçilenleri Ekle</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr class="" />

                        <div class="row row-overflow">
                            <div class="col-sm-12">
                                <div class="table-responsive">
                                    <table id="mCustomerSearchSalesmanOfCustomerTable" class="display compact row-border cell-border order-column stripe hover nowrap w-100"></table>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div id="modal-EmailShow" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="classInfo" aria-hidden="true">
        <div class="modal-dialog">

            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title custom-font">Şifre Sıfırlama</h3>
                </div>
                <div class="modal-body">

                    <p> İlgili mail adresine şifre sıfırlama linki gönderilecektir. Emin misiniz.</p>
                    <input type="text" class="form-control" ng-model="userEmail" placeholder="Mail Adresius" />

                </div>
                <div class="modal-footer">
                    <button class="btn btn-lightred btn-ef btn-ef-4 btn-ef-4c" data-dismiss="modal">İptal<i class="fa fa-arrow-right"></i> </button>
                    <button class="btn btn-success btn-ef btn-ef-3 btn-ef-3c" ng-click="sendPasswordResetMail()"> Gönder<i class="fa fa-arrow-right"></i> </button>
                </div>
            </div>

        </div>
    </div>
    <!-- #endregion -->
    <!-- CUSTOMER SELECT MODAL-->


    <script src="~/Scripts/Js/jszip.js" type="text/javascript"></script>
    <script src="~/Scripts/Js/xlsx.full.min.js" type="text/javascript"></script>
    <script src="~/Scripts/Js/FileSaver.js" type="text/javascript"></script>



</div>

@section cScriptLibrary{
    @Scripts.Render("~/Scripts/Admin/vendor/filestyle/bootstrap-filestyle.min.js")
}

@section cScriptCode{

    <script src="@Url.ContentVersioned("/Scripts/Admin/salesmanSelect.js", HttpContext.Current.Request)"></script>
    <script src="@Url.ContentVersioned("/Scripts/Admin/customerSelect.js", HttpContext.Current.Request)"></script>
    <script src="@Url.ContentVersioned("/Scripts/Admin/customerSelectSalesOfCust.js", HttpContext.Current.Request)"></script>
    <script src="@Url.ContentVersioned("/Scripts/Admin/salesmans.js", HttpContext.Current.Request)"></script>


}
