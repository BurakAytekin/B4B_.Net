<style type="text/css">
    .map-location {
        width: 800px;
        height: 400px;
    }
</style>

<div id="mUserDetail" tabindex="-1" role="dialog" aria-labelledby="mUserDetailLabel" aria-hidden="true" class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Kullanıcı Detayı</h3>
            </div>
            <div class="modal-body">
                <form id="mUserDetailForm" role="form" method="post" class="form-horizontal form-modal">
                    <div class="tile-body p-10">
                        <div class="row">
                            <div class="col-sm-12">
                                <!-- #region Nav Tabs -->
                                <ul role="tablist" class="nav nav-tabs tabs-dark">
                                    <li role="presentation" class="active"><a href="#tUserGeneralInformation" aria-controls="tUserGeneralInformation" role="tab" data-toggle="tab"><span class="hidden-sm">Genel</span> <i class="fa fa-book visible-sm"></i></a></li>
                                    <li role="presentation"><a href="#tUserLogin" aria-controls="tUserLogin" ng-click="getcustomerUserLoginLog();" role="tab" data-toggle="tab"><span class="hidden-sm">Login</span> <i class="fa fa-files-o visible-sm"></i></a></li>
                                    <li role="presentation"><a href="#tUserSearch" aria-controls="tUserSearch" role="tab" data-toggle="tab" ng-click="getUserDetailSearchTab()"><span class="hidden-sm">Arama</span> <i class="fa fa-copyright visible-sm"></i></a></li>
                                    <li role="presentation"><a href="#tUserBasket" aria-controls="tUserBasket" role="tab" data-toggle="tab"><span class="hidden-sm">Sepetindeki Ürünler</span> <i class="fa fa-copyright visible-sm"></i></a></li>
                                    <li role="presentation"><a href="#tUserAuthority" aria-controls="tUserAuthority" role="tab" data-toggle="tab" ng-click="getUserAuthority()"><span class="hidden-sm">Yetkilendirme</span> <i class="fa fa-file-text-o visible-sm"></i></a></li>
                                    <li role="presentation"><a href="#tUserLocation" aria-controls="tUserLocation" role="tab" data-toggle="tab" ng-click="showLocation()"><span class="hidden-sm">Lokasyon</span> <i class="fa fa-file-text-o visible-sm"></i></a></li>
                                    <li role="presentation"><a href="#tUserTwoFactorAuthentication" aria-controls="tUserTwoFactorAuthentication" role="tab" data-toggle="tab" ng-click="getAuthenticatorImage()"><span class="hidden-sm">Two Factor Authenticator</span> <i class="fa fa-book visible-sm"></i></a></li>
                                </ul>
                                <div class="tab-content">
                                    <div id="tUserGeneralInformation" role="tabpanel" class="tab-pane active">
                                        <div class="row form-horizontal form-group-sm">
                                            <div class="col-sm-6">
                                                <div class="panel panel-default panel-filled">
                                                    <div class="panel-heading">
                                                        <h3 class="panel-title">Cari Bilgileri</h3>
                                                    </div>

                                                    <div class="panel-body p-10">
                                                        <div class="form-group mb-5">
                                                            <label for="iProductManufacturer" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Kodu</label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <input type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.Code" placeholder="Lütfen, Kullanıcı Kodu Girinşz..." class="form-control" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group mb-5">
                                                            <label for="iProductManufacturerCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Adı</label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <input id="iProductManufacturerCode" type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.Name" placeholder="Lütfen, İsim Giriniz..." class="form-control" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group mb-0">
                                                            <label for="iProductUnit" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Şifre</label>
                                                            <div class="col-xs-12 col-sm-12 col-md-3">
                                                                <input id="iProductUnit" type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.Password" class="form-control" />
                                                            </div>
                                                            <div class="col-xs-12 col-sm-12 col-md-5">
                                                                <input type="button" ng-disabled="lockUserUpdate" ng-click="showEmailSendScreen()" class="btn btn-warning btn-rounded btn-ef btn-ef-5 btn-ef-5a" value="Sıfırlama Gönder" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="panel panel-default panel-filled">
                                                    <div class="panel-heading">
                                                        <h3 class="panel-title">İletişim Bilgileri</h3>
                                                    </div>

                                                    <div class="panel-body p-10">
                                                        <div class="form-group mb-5">
                                                            <label for="iProductConditionCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Tel 1</label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <input id="iProductConditionCode" type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.Tel" placeholder="Lütfen, Tel Giriniz..." class="form-control" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group mb-5">
                                                            <label for="iProductConditionCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Gsm</label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <input id="iProductConditionCode" type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.Gsm" placeholder="Lütfen, Gsm Giriniz..." class="form-control" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group mb-5">
                                                            <label for="iProductConditionCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">E Posta </label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <input id="iProductConditionCode" type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.Mail" placeholder="Lütfen, E Posta  Giriniz..." class="form-control" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group mb-5">
                                                            <label for="iProductConditionCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">İl </label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <input id="iProductConditionCode" type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.City" placeholder="Lütfen, İl  Giriniz..." class="form-control" />
                                                            </div>
                                                        </div>


                                                        <div class="form-group mb-5">
                                                            <label for="iProductConditionCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Adres </label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                               @* <input type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.Address" placeholder="Lütfen, Adres  Giriniz..." class="form-control" />*@
                                                                <textarea  id="iProductConditionCode" ng-disabled="lockUserUpdate" ng-model="selectedUser.Address" placeholder="Lütfen, Adres  Giriniz..." rows="20" class="form-control"></textarea>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-sm-6">
                                                <div class="panel panel-default panel-filled">
                                                    <div class="panel-heading">
                                                        <h3 class="panel-title">Entegrasyon Bilgileri</h3>
                                                    </div>

                                                    <div class="panel-body p-10">
                                                        <div class="form-group mb-5">
                                                            <label for="iProductConditionCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Satış Koşulu</label>

                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <div class="input-group input-group-sm">
                                                                    <input id="iProductConditionCode" type="text" ng-disabled="(lockUserUpdate || selectedUser.AuthorityUser._RuleActive == false)" ng-model="selectedUser.RuleCode" placeholder="Lütfen, Satış Koşulu Giriniz..." class="form-control" />
                                                                    <span class="input-group-btn">
                                                                        <button ng-disabled="(lockUserUpdate || selectedUser.AuthorityUser._RuleActive == false)" ng-click="customerRuleOpen(2);"  class="btn btn-block btn-primary btn-rounded">
                                                                            <i class="fa fa-search"></i>
                                                                        </button>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group mb-5">
                                                            <label for="iProductConditionCode" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Zam Oranı </label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <input id="iProductConditionCode" type="text" ng-disabled="lockUserUpdate" ng-model="selectedUser.Rate" value="0" placeholder="Lütfen, Zam Oranı  Giriniz..." class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group mb-5">
                                                            <label for="iProductSpecialDiscount" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Admin</label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <label class="checkbox checkbox-custom">
                                                                    <input type="checkbox" ng-click="" ng-disabled="lockUserUpdate" ng-model="selectedUser.Type" /><i></i>
                                                                </label>
                                                            </div>
                                                        </div>

                                                        <div class="form-group mb-0">
                                                            <label for="iProductSpecialDiscount" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">Aktif</label>
                                                            <div class="col-xs-12 col-sm-12 col-md-8">
                                                                <label class="checkbox checkbox-custom">
                                                                    <input type="checkbox" ng-click="" ng-disabled="lockUserUpdate" ng-model="selectedUser.Status" /><i></i>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-8 col-sm-offset-2 text-center">
                                                <div class="btn-group btn-group-rounded">
                                                    <button class="btn btn-warning btn-rounded btn-ef btn-ef-5 btn-ef-5a" ng-click="editActive()"><i class="fa fa-edit"></i> <span>Düzenle</span></button>
                                                    <button class="btn btn-danger btn-rounded btn-ef btn-ef-5 btn-ef-5a" ng-click="editCancel()"><i class="fa fa-close"></i> <span>İptal</span></button>
                                                    <button class="btn btn-primary btn-rounded btn-ef btn-ef-5 btn-ef-5a" ng-click="saveUser()"><i class="fa fa-floppy-o"></i> <span>Kaydet</span></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="tUserLogin" role="tabpanel" class="tab-pane">


                                        <div loading-container="tableCustomerUsersLoginParams.settings().$loading">
                                            <table ng-table="tableCustomerUsersLoginParams" class="table table-condensed table-bordered table-striped" ng-form="rowFormCustomerUsersLoginInstallment" disable-filter="isAddingPassiveManufacturer" demo-tracked-table="tableTracker">
                                                <tr ng-repeat="row in $data" ng-form="rowFormCustomerUsersLoginInstallment" demo-tracked-table-row="row">

                                                    <td title="'İşlem'" filter="{Process: 'text'}" sortable="'Process'" ng-switch="row.isEditing" ng-class="Process.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Process" demo-tracked-table-cell>
                                                        <span ng-switch-default class="editable-text">{{row.Process}}</span>
                                                    </td>

                                                    <td title="'Açıklama'" filter="{Explanation: 'text'}" sortable="'Explanation'" ng-switch="row.isEditing" ng-class="Explanation.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="Explanation" demo-tracked-table-cell>
                                                        <span ng-switch-default class="editable-text">{{row.Explanation}}</span>
                                                    </td>
                                                    <td title="'Tarih'" filter="{CreateDate: 'text'}" sortable="'CreateDate'" ng-switch="row.isEditing" ng-class="CreateDate.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="CreateDate" demo-tracked-table-cell>
                                                        <span ng-switch-default class="editable-text">{{row.CreateDate | dateFilter  | date:'dd.MM.yyyy  hh:mm'}}</span>
                                                    </td>
                                                    <td title="'Ip Adresi'" filter="{IpAddress: 'text'}" sortable="'IpAddress'" ng-switch="row.isEditing" ng-class="IpAddress.$dirty ? 'bg-warning text-center' : 'text-center'" ng-form="IpAddress" demo-tracked-table-cell>
                                                        <span ng-switch-default class="editable-text">{{row.IpAddress}}</span>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>



                                    </div>

                                    <div id="tUserSearch" role="tabpanel" class="tab-pane">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <div class='input-group input-criteria date'>
                                                            <span class="input-group-addon no-minwidth-zero">
                                                                <span class="fa fa-calendar"></span> Başlangıç Tarihi
                                                            </span>
                                                            <input type='text' class="form-control detepicker" id="iSearchUserLogStartDate"  />
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class='input-group input-criteria date'>
                                                            <span class="input-group-addon no-minwidth-zero">
                                                                <span class="fa fa-calendar"></span> Bitiş Tarihi
                                                            </span>
                                                            <input type='text' class="form-control detepicker" id="iSearchUserLogEndDate" />
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <a class="btn btn-success" ng-click="searchUserLogList()"><i class="fa fa-search" aria-hidden="true"></i><span class="hidden-xs"> Listele</span></a>
                                                    </div>
                                                </div>
                                            </div>



                                            <div class="col-md-12">
                                                <div class="sm-margin"></div>
                                                <table id="pDataTable" class="table table-striped table-hover table-custom">
                                                    <!---table-condensed table-striped table-hover-->
                                                    <thead>
                                                        <tr>

                                                            <th>Tarih</th>
                                                            <th>Arama</th>
                                                            @*<th>Araç Marka</th>
                                                            <th>Araç Model</th>*@
                                                            <th>Kampanya</th>
                                                            <th>Yeni Ürün</th>
                                                            <th>Resmi Olan</th>
                                                            <th>Detay</th>

                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="item in reportUserList">

                                                            <td>{{item.Date | dateFilter2  |  date:'dd/MM/yyyy HH:mm:ss'}}</td>
                                                            <td>{{item.Parameters.T9Text}}</td>

                                                            @*<td>{{item.Parameters.VehicleBrand}}</td>
                                                            <td>{{item.Parameters.VehicleBrandModel}}</td>*@
                                                            <td><input type="checkbox" ng-checked="{{item.Parameters.Campaign}}" disabled /></td>
                                                            <td><input type="checkbox" ng-checked="{{item.Parameters.NewProduct}}" disabled /></td>
                                                            <td><input type="checkbox" ng-checked="{{item.Parameters.Picture}}" disabled /></td>
                                                            <td><input type="button" ng-if="item.Result==0" class="btn btn-success btn-block m-0" ng-click="searchLogDetail(item.Id)" value="Detay" /></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>
                                    </div>

                                    <div id="tUserBasket" role="tabpanel" class="tab-pane">
                                        Sepetindeki Ürünler İçeriği
                                    </div>

                                    <div id="tUserAuthority" role="tabpanel" class="tab-pane">
                                        <div class="panel-body p-10" ng-repeat="userFieldItem in userFieldList">
                                            <div class="form-group mb-5">
                                                <label for="chckAuthurityCustomer{{userFieldItem.Field}}" class="col-xs-12 col-sm-5 col-md-4 control-label text-left hidden-xs hidden-sm">{{userFieldItem.Comment}}</label>
                                                <div class="col-xs-12 col-sm-12 col-md-8">
                                                    <label class="checkbox checkbox-custom">
                                                        <input type="checkbox" id="chckAuthurityCustomer{{userFieldItem.Field}}" ng-change="checkAuthorityUser(userFieldItem.Field)" ng-model="userAuthorityItem[0][userFieldItem.Field]" /><i></i>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="tUserLocation" role="tabpanel" class="tab-pane">
                                        <div id="map-location" class="map-location"></div>
                                    </div>
                                    <div id="tUserTwoFactorAuthentication" class="tab-pane" role="tabpanel">
                                        <div class="row">
                                            <div class="col-sm-12" @*ng-if="selectedSalesman.Id != undefined && selectedSalesman.Id > 0;"*@>


                                                <label class="checkbox checkbox-custom">
                                                    <input id="chkCustomerSpecialInstallment" type="checkbox" ng-click="setAuthenticatorValue();" ng-model="selectedUser.IsAuthenticator" /><i></i> {{selectedUser.Name}} kullanıcısı için Two Factor Authenticator Aktifleştir.
                                                </label>
                                              
                                                <button class="btn btn-success pull-right" ng-disabled="!selectedUser.IsAuthenticator" ng-if="selectedUser.AuthenticatorGuid == null" ng-click="createAuthenticator(selectedUser,0)">
                                                    <i class="fa fa-caret-right"></i>
                                                    Oluştur
                                                </button>
                                                <button class="btn btn-success pull-right" ng-disabled="!selectedUser.IsAuthenticator" ng-if="selectedUser.AuthenticatorGuid.length > 0" ng-click="createAuthenticator(selectedUser,1)">
                                                    <i class="fa fa-refresh"></i>
                                                    Yenile
                                                </button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <img src="{{authenticatorQrCode}}" />
                                            </div>
                                            <div class="col-md-6">
                                                <div class="alert alert-info mb-10">
                                                    <strong>Bilgi!</strong> Kullanıcının mobil uygulama olarak <strong>Google Authenticator</strong> uygulamasını yüklemesi gerekmektedir.
                                                </div>
                                                <div class="alert alert-info mb-10">
                                                    <strong>Bilgi!</strong> Kullanıcının oluşan Qr Code görselini Google Authenticator uygulamasına taratması gerekmektedir
                                                </div>
                                                <div class="alert alert-info mb-10">
                                                    <strong>Bilgi!</strong> Qr Code görselini yenilemeniz durumunda kullanıcının oluşan Qr Code görselini tekrar taratması gerekmektedir
                                                </div>
                                                <div class="alert alert-info mb-10">
                                                    <strong>Bilgi!</strong> Kullanıcı <strong>Google Authenticator</strong> uygulamasından üretilen şifreyi mevcut şifresinin sonuna ek olarak girmesi gerekmektedir.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="modal-EmailShow" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="classInfo" aria-hidden="true">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title custom-font">Şifre Sıfırlama</h3>
            </div>
            <div class="modal-body">

                <p> İlgili mail adresine şifre sıfırlama linki gönderilecektir. Emin misiniz.</p>
                <input type="text" class="form-control" ng-model="userEmail" placeholder="Mail Adresius" />

            </div>
            <div class="modal-footer">
                <button class="btn btn-lightred btn-ef btn-ef-4 btn-ef-4c" data-dismiss="modal">İptal<i class="fa fa-arrow-right"></i> </button>
                <button class="btn btn-success btn-ef btn-ef-3 btn-ef-3c" ng-click="sendPasswordResetMail()"> Gönder<i class="fa fa-arrow-right"></i> </button>
            </div>
        </div>

    </div>
</div>